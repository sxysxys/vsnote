## 数据依赖关系
- 函数依赖：一个值（主键）确定了以后，唯一确定了它的属性。
- 多值依赖：一个值确定了以后，能够确定唯一的一组属性。
- 连接依赖：表如果能无损连接那么表中的属性称为连接依赖。就是将表弄成多个子表，将子表进行联结能够还原原来的表，那么此时就有连接依赖。连接依赖例子：公司生产木头，学校和公司有合作关系，所以学校要用到木头就一定要用公司生产的木头，这就叫连接依赖。

## 数据库设计
#### 范式理论
- 1nf：不允许表中套表。
- 2nf：在一范式的基础上，且任意属性都依赖于它的主键，也就是必须通过主键确定所有的其他属性。如果有的属性只对部分主键有函数依赖，那么它就不符合2nf。
  - 不满足2nf的问题：
    - 对学生成绩表来说，它的主键是学生学号和课程名称，属性有姓名、地址、课程名称、课程成绩；那么如果仅有这张表，一个学生没选课的时候，他就不能插入自己的基本信息，因为课程名称是主键之一。
    - 删除了那么基本信息也删除了。
    - 基本信息无限重复，冗余量大；当住址一变，那么课程表里全得改。
  - 所以设计需要满足2nf，保证一事一地，不要将一张表记录多个事。
- 3nf：满足2nf的情况下，不能有传递依赖。
    ![](/截图/截屏2020-03-2216.04.33.png)
    - 上述就是薪资等级和薪水之间有传递依赖。因为薪水是依赖于薪水等级的，所以薪水等级没确定的时候，这时候无法进行插入。
    - 当删除的时候，会将依赖关系也删掉了。
    - 更新的时候，由于工资和工资等级的大量冗余，如果薪资等级和薪资的关系改了（三级工资从拿5000到6000），那么全得动。
    - 解决方法：还是像之前一样，一事一地的分开。
- BCNF：修正的3nf，3nf是不让其他属性对主属性有部分依赖或传递依赖；bcnf是在3nf的基础上，不允许主属性对其他某个属性的部分依赖（主键有超过1个）和传递依赖。也就是每一个决定子必须是主键。例如城市和街道决定了邮政编码，但是邮政编码确定了城市；这就是典型的满足3nf，不满足bcnf。
- 4nf：满足3nf的基础上，消除多值依赖。
- 5nf：4nf的基础上，消除连接依赖。
- 数据库设计的时候达到3nf已经很合理了。一般不考虑4 5nf。精髓就是一事一地。

#### E-R图
![](/截图/截屏2020-03-2216.40.12.png)

构建数据库：
- 以过程为中心：没有分析数据的关系，在过程中用到什么就建什么表。只适用业务单一的小应用。
- 以数据为中心：分析数据之间的内在关系。能支撑任何过程。

#### 整体步骤
![](/截图/截屏2020-03-2217.11.13.png)
- 需求分析：找出基本数据元素，统一关系属性名称，搞清楚每一个信息属性的源头在哪。
- 概念设计：抽象出基本实体已经实体之间的联系。保证能实现所有的过程。
  - E-R图工具：ERWIN、Rose，能够画出e-r图来直接生成关系表。
- 逻辑设计：
  - 建表。有的时候根据实际运行的需要可能不会严格的按照3nf来设计，因为3nf有时候会将表分割的太琐碎，导致到时候会有大量的联结操作，影响效率。所以要在减少数据冗余和提高数据库访问效率之间折中。
  - 定义用户的视图。
  - 与遗留系统的接口表设计。
- 物理设计：考虑dbms特点，建立必要的索引、簇集等。

#### 例子

